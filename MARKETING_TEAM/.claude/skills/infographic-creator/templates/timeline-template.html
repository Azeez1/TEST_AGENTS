<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{TITLE}} - Timeline Infographic</title>

    <!-- Anime.js for animations -->
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: {{BODY_FONT}}, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: {{BACKGROUND_COLOR}};
            color: {{TEXT_COLOR}};
            overflow-x: hidden;
            padding: 40px 20px;
        }

        .infographic-container {
            max-width: {{CANVAS_WIDTH}}px;
            margin: 0 auto;
            position: relative;
        }

        /* Logo */
        .logo {
            position: absolute;
            top: {{LOGO_TOP}}px;
            {{LOGO_POSITION}}: {{LOGO_OFFSET}}px;
            width: {{LOGO_SIZE}}px;
            opacity: {{LOGO_OPACITY}};
            z-index: 100;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 80px;
        }

        .title {
            font-family: {{HEADLINE_FONT}}, sans-serif;
            font-size: {{TITLE_SIZE}}px;
            font-weight: bold;
            color: {{PRIMARY_COLOR}};
            margin-bottom: 20px;
            opacity: 0;
            transform: translateY(-20px);
        }

        .subtitle {
            font-size: {{SUBTITLE_SIZE}}px;
            color: {{SECONDARY_COLOR}};
            opacity: 0;
            transform: translateY(-20px);
        }

        /* Timeline container */
        .timeline {
            position: relative;
            padding: 40px 0;
        }

        /* Timeline axis (vertical line) */
        .timeline-axis {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 0;
            background: linear-gradient(to bottom, {{PRIMARY_COLOR}}, {{ACCENT_COLOR}});
            border-radius: 2px;
        }

        /* Timeline items */
        .timeline-item {
            position: relative;
            margin-bottom: 100px;
            opacity: 0;
        }

        .timeline-item:last-child {
            margin-bottom: 0;
        }

        /* Alternating left/right layout */
        .timeline-item:nth-child(odd) .timeline-content {
            margin-left: auto;
            padding-left: 60px;
            text-align: left;
        }

        .timeline-item:nth-child(even) .timeline-content {
            margin-right: auto;
            padding-right: 60px;
            text-align: right;
        }

        .timeline-content {
            width: calc(50% - 40px);
            background: {{CARD_BACKGROUND}};
            padding: 30px;
            border-radius: {{BORDER_RADIUS}}px;
            box-shadow: {{CARD_SHADOW}};
            position: relative;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .timeline-content:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        /* Connector line to axis */
        .timeline-item:nth-child(odd) .timeline-content::before {
            content: '';
            position: absolute;
            left: -60px;
            top: 50%;
            width: 60px;
            height: 2px;
            background: {{ACCENT_COLOR}};
            transform: translateY(-50%);
        }

        .timeline-item:nth-child(even) .timeline-content::before {
            content: '';
            position: absolute;
            right: -60px;
            top: 50%;
            width: 60px;
            height: 2px;
            background: {{ACCENT_COLOR}};
            transform: translateY(-50%);
        }

        /* Timeline node (circle on axis) */
        .timeline-node {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 24px;
            height: 24px;
            background: {{PRIMARY_COLOR}};
            border: 4px solid {{BACKGROUND_COLOR}};
            border-radius: 50%;
            box-shadow: 0 0 0 4px {{ACCENT_COLOR}};
            z-index: 10;
            opacity: 0;
            scale: 0;
        }

        .timeline-node.completed {
            background: {{ACCENT_COLOR}};
        }

        /* Date badge */
        .timeline-date {
            font-size: {{DATE_SIZE}}px;
            font-weight: bold;
            color: {{PRIMARY_COLOR}};
            margin-bottom: 15px;
            font-family: {{HEADLINE_FONT}}, sans-serif;
        }

        /* Event title */
        .timeline-title {
            font-size: {{EVENT_TITLE_SIZE}}px;
            font-weight: 600;
            color: {{TEXT_COLOR}};
            margin-bottom: 12px;
        }

        /* Event description */
        .timeline-description {
            font-size: {{EVENT_DESC_SIZE}}px;
            color: {{SECONDARY_COLOR}};
            line-height: 1.6;
        }

        /* Icon for events */
        .timeline-icon {
            font-size: 32px;
            margin-bottom: 10px;
            display: inline-block;
        }

        /* Status badge */
        .timeline-status {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .timeline-status.completed {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
        }

        .timeline-status.in-progress {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }

        .timeline-status.upcoming {
            background: rgba(156, 163, 175, 0.1);
            color: #6b7280;
        }

        /* Watermark */
        .watermark {
            position: fixed;
            bottom: {{WATERMARK_BOTTOM}}px;
            {{WATERMARK_POSITION}}: {{WATERMARK_OFFSET}}px;
            font-size: {{WATERMARK_SIZE}}px;
            color: {{TEXT_COLOR}};
            opacity: {{WATERMARK_OPACITY}};
            z-index: 100;
        }

        /* Responsive - switch to single column on mobile */
        @media (max-width: 768px) {
            .timeline-axis {
                left: 30px;
            }

            .timeline-item:nth-child(odd) .timeline-content,
            .timeline-item:nth-child(even) .timeline-content {
                width: calc(100% - 80px);
                margin-left: 80px;
                margin-right: 0;
                padding-left: 0;
                padding-right: 0;
                text-align: left;
            }

            .timeline-item:nth-child(odd) .timeline-content::before {
                left: -60px;
                width: 60px;
            }

            .timeline-item:nth-child(even) .timeline-content::before {
                left: -60px;
                right: auto;
                width: 60px;
            }

            .timeline-node {
                left: 30px;
            }

            .title {
                font-size: calc({{TITLE_SIZE}}px * 0.7);
            }
        }

        /* Print styles */
        @media print {
            body {
                background: white;
            }

            .timeline-content {
                break-inside: avoid;
            }
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <div class="infographic-container">
        <!-- Logo -->
        {{#if LOGO_PATH}}
        <img src="{{LOGO_PATH}}" alt="Logo" class="logo">
        {{/if}}

        <!-- Header -->
        <div class="header">
            <h1 class="title">{{TITLE}}</h1>
            {{#if SUBTITLE}}
            <p class="subtitle">{{SUBTITLE}}</p>
            {{/if}}
        </div>

        <!-- Timeline -->
        <div class="timeline">
            <!-- Timeline axis (vertical line) -->
            <div class="timeline-axis"></div>

            <!-- Timeline items -->
            {{#each TIMELINE_EVENTS}}
            <div class="timeline-item" data-event-index="{{@index}}">
                <!-- Node (circle on axis) -->
                <div class="timeline-node {{status}}"></div>

                <!-- Content card -->
                <div class="timeline-content">
                    {{#if icon}}
                    <div class="timeline-icon">{{icon}}</div>
                    {{/if}}

                    <div class="timeline-date">{{date}}</div>
                    <h3 class="timeline-title">{{title}}</h3>

                    {{#if description}}
                    <p class="timeline-description">{{description}}</p>
                    {{/if}}

                    {{#if status}}
                    <span class="timeline-status {{status}}">{{status}}</span>
                    {{/if}}
                </div>
            </div>
            {{/each}}
        </div>

        <!-- Watermark -->
        {{#if WATERMARK_TEXT}}
        <div class="watermark">{{WATERMARK_TEXT}}</div>
        {{/if}}
    </div>

    <script>
        // Configuration
        const config = {
            primaryColor: '{{PRIMARY_COLOR}}',
            accentColor: '{{ACCENT_COLOR}}',
            animationDuration: {{ANIMATION_DURATION}} || 1500,
            animationDelay: {{ANIMATION_DELAY}} || 200,
            enableAnimations: {{ENABLE_ANIMATIONS}} !== false,
            staggerDelay: 300
        };

        // Wait for DOM to load
        document.addEventListener('DOMContentLoaded', function() {
            if (config.enableAnimations) {
                initAnimations();
            }
        });

        // Initialize animations
        function initAnimations() {
            // Animate title
            anime({
                targets: '.title',
                opacity: [0, 1],
                translateY: [-20, 0],
                duration: 1000,
                easing: 'easeOutExpo'
            });

            // Animate subtitle
            anime({
                targets: '.subtitle',
                opacity: [0, 1],
                translateY: [-20, 0],
                duration: 1000,
                delay: 200,
                easing: 'easeOutExpo'
            });

            // Animate timeline axis (grows from top)
            const timelineAxis = document.querySelector('.timeline-axis');
            const timelineHeight = document.querySelector('.timeline').offsetHeight;

            anime({
                targets: '.timeline-axis',
                height: [0, timelineHeight],
                duration: config.animationDuration,
                delay: 600,
                easing: 'easeInOutQuad'
            });

            // Animate timeline items sequentially
            const timelineItems = document.querySelectorAll('.timeline-item');

            timelineItems.forEach((item, index) => {
                const isOdd = index % 2 === 0;
                const delay = 800 + (index * config.staggerDelay);

                // Animate content card
                anime({
                    targets: item,
                    opacity: [0, 1],
                    translateX: isOdd ? [-50, 0] : [50, 0],
                    duration: 800,
                    delay: delay,
                    easing: 'easeOutExpo'
                });

                // Animate node (circle)
                anime({
                    targets: item.querySelector('.timeline-node'),
                    opacity: [0, 1],
                    scale: [0, 1],
                    duration: 600,
                    delay: delay + 200,
                    easing: 'easeOutElastic(1, .8)'
                });

                // Pulse effect for nodes
                anime({
                    targets: item.querySelector('.timeline-node'),
                    scale: [1, 1.2, 1],
                    duration: 1500,
                    delay: delay + 800,
                    easing: 'easeInOutQuad'
                });
            });
        }

        // Add interactive hover effects
        document.querySelectorAll('.timeline-content').forEach(content => {
            content.addEventListener('mouseenter', function() {
                if (config.enableAnimations) {
                    anime({
                        targets: this.querySelector('.timeline-icon'),
                        scale: [1, 1.2],
                        rotate: [0, 10],
                        duration: 400,
                        easing: 'easeOutElastic(1, .6)'
                    });
                }
            });

            content.addEventListener('mouseleave', function() {
                if (config.enableAnimations) {
                    anime({
                        targets: this.querySelector('.timeline-icon'),
                        scale: [1.2, 1],
                        rotate: [10, 0],
                        duration: 400,
                        easing: 'easeOutElastic(1, .6)'
                    });
                }
            });
        });

        // Export function
        function exportInfographic(format = 'png') {
            console.log('Exporting timeline as:', format);
            // Future: Integration with export libraries
        }

        window.exportInfographic = exportInfographic;
    </script>
</body>
</html>
